# 📘 README.md - Prompt Engineering Lab with Gemini API

## 🎯 ภาพรวมของ Lab (Lab Overview)

Lab นี้ออกแบบมาเพื่อให้นักศึกษาได้เรียนรู้และฝึกฝนเทคนิค **Prompt Engineering** ขั้นสูงผ่าน **Google Gemini API** โดยครอบคลุมตั้งแต่พื้นฐานไปจนถึงเทคนิคขั้นสูง พร้อมระบบประเมินผล (Evaluation) ที่ครบถ้วน

---

## 📚 สารบัญ (Table of Contents)

1. [ทฤษฎีพื้นฐาน Prompt Engineering](#-ทฤษฎีพื้นฐาน-prompt-engineering)
2. [สถาปัตยกรรมของ Lab](#-สถาปัตยกรรมของ-lab)
3. [เทคนิคทั้ง 8 แบบ](#-เทคนิคทั้ง-8-แบบ)
4. [ระบบ Evaluation](#-ระบบ-evaluation)
5. [การติดตั้งและเริ่มต้นใช้งาน](#-การติดตั้งและเริ่มต้นใช้งาน)
6. [แบบฝึกหัดและ Challenge](#-แบบฝึกหัดและ-challenge)
7. [แหล่งเรียนรู้เพิ่มเติม](#-แหล่งเรียนรู้เพิ่มเติม)

---

## 🧠 ทฤษฎีพื้นฐาน Prompt Engineering

### Prompt Engineering คืออะไร?

**Prompt Engineering** คือศาสตร์และศิลป์ในการออกแบบ "คำสั่ง" (Prompt) ที่ส่งให้ Large Language Models (LLMs) เพื่อให้ได้ผลลัพธ์ที่ต้องการอย่างแม่นยำและมีคุณภาพ

```
┌─────────────────────────────────────────────────────────────────┐
│                    PROMPT ENGINEERING OVERVIEW                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│    ┌──────────┐      ┌──────────┐      ┌──────────────┐        │
│    │  INPUT   │ ──▶  │   LLM    │ ──▶  │   OUTPUT     │        │
│    │ (Prompt) │      │ (Gemini) │      │  (Response)  │        │
│    └──────────┘      └──────────┘      └──────────────┘        │
│         │                                      │                │
│         │    ┌─────────────────────────┐      │                │
│         └───▶│  Prompt Engineering     │◀─────┘                │
│              │  • เทคนิคการเขียน        │                       │
│              │  • การจัดโครงสร้าง        │                       │
│              │  • การให้ตัวอย่าง         │                       │
│              │  • การประเมินผล          │                       │
│              └─────────────────────────┘                        │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### ทำไม Prompt Engineering ถึงสำคัญ?

```
┌────────────────────────────────────────────────────────────────────┐
│                    ความสำคัญของ Prompt Engineering                   │
├────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ❌ Bad Prompt                        ✅ Good Prompt                │
│  ┌─────────────────────┐              ┌─────────────────────┐      │
│  │ "สรุปให้หน่อย"       │              │ "สรุปบทความนี้ใน    │      │
│  │                     │              │  3 bullet points    │      │
│  │                     │              │  โดยเน้นประเด็นหลัก  │      │
│  └─────────────────────┘              └─────────────────────┘      │
│           │                                    │                    │
│           ▼                                    ▼                    │
│  ┌─────────────────────┐              ┌─────────────────────┐      │
│  │ ผลลัพธ์: คลุมเครือ    │              │ ผลลัพธ์: ชัดเจน      │      │
│  │ ไม่ตรงประเด็น        │              │ ตรงความต้องการ       │      │
│  │ Format ไม่แน่นอน    │              │ Format เป็นระบบ     │      │
│  └─────────────────────┘              └─────────────────────┘      │
│                                                                     │
│  💡 Prompt ที่ดี = ผลลัพธ์ที่ดี + ประหยัดเวลา + ลด Token Cost       │
│                                                                     │
└────────────────────────────────────────────────────────────────────┘
```

---

## 🏗 สถาปัตยกรรมของ Lab

### โครงสร้าง Lab ทั้งหมด

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        LAB ARCHITECTURE                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   PART 0: Setup                                                          │
│   ════════════════                                                       │
│   ┌─────────────────────────────────────────────────────────────┐       │
│   │  • ติดตั้ง google-genai library                              │       │
│   │  • กำหนด API Key และ Model                                  │       │
│   │  • ทดสอบ Connection                                         │       │
│   └─────────────────────────────────────────────────────────────┘       │
│                              │                                           │
│                              ▼                                           │
│   PART 1-8: เทคนิค Prompt Engineering                                   │
│   ════════════════════════════════════                                   │
│   ┌──────────────┬──────────────┬──────────────┬──────────────┐        │
│   │   Part 1     │   Part 2     │   Part 3     │   Part 4     │        │
│   │  Few-shot    │    CoT       │Self-Consist. │Prompt Chain  │        │
│   │     ⭐       │    ⭐⭐      │   ⭐⭐⭐     │   ⭐⭐⭐     │        │
│   └──────────────┴──────────────┴──────────────┴──────────────┘        │
│   ┌──────────────┬──────────────┬──────────────┬──────────────┐        │
│   │   Part 5     │   Part 6     │   Part 7     │   Part 8     │        │
│   │ Reflection   │    ToT       │Self-Feedback │Self-Critique │        │
│   │   ⭐⭐⭐⭐   │  ⭐⭐⭐⭐⭐  │   ⭐⭐⭐⭐   │  ⭐⭐⭐⭐⭐  │        │
│   └──────────────┴──────────────┴──────────────┴──────────────┘        │
│                              │                                           │
│                              ▼                                           │
│   PART 9-10: Evaluation                                                  │
│   ════════════════════════                                               │
│   ┌─────────────────────────────────────────────────────────────┐       │
│   │  • LLM-as-a-Judge       • Pairwise Comparison               │       │
│   │  • Reference-free       • Comprehensive Evaluation          │       │
│   └─────────────────────────────────────────────────────────────┘       │
│                              │                                           │
│                              ▼                                           │
│   PART 11: Final Challenge                                               │
│   ════════════════════════                                               │
│   ┌─────────────────────────────────────────────────────────────┐       │
│   │         รวมทุกเทคนิคเข้าด้วยกัน (Combined Techniques)         │       │
│   └─────────────────────────────────────────────────────────────┘       │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 🔧 เทคนิคทั้ง 8 แบบ

### 1. Few-shot Prompting ⭐

**ทฤษฎี:** การให้ตัวอย่าง (examples) ใน prompt เพื่อช่วยให้ LLM เข้าใจรูปแบบที่ต้องการ

```
┌─────────────────────────────────────────────────────────────────┐
│                      FEW-SHOT PROMPTING                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│   ┌─────────────┐   ┌─────────────┐   ┌─────────────┐          │
│   │  Zero-shot  │   │  One-shot   │   │  Few-shot   │          │
│   │  (0 ตัวอย่าง) │   │  (1 ตัวอย่าง) │   │ (2-5 ตัวอย่าง)│          │
│   └──────┬──────┘   └──────┬──────┘   └──────┬──────┘          │
│          │                 │                 │                   │
│          ▼                 ▼                 ▼                   │
│   ┌─────────────┐   ┌─────────────┐   ┌─────────────┐          │
│   │ ความแม่นยำ   │   │ ความแม่นยำ   │   │ ความแม่นยำ   │          │
│   │    ต่ำ       │   │    กลาง     │   │    สูง      │          │
│   └─────────────┘   └─────────────┘   └─────────────┘          │
│                                                                  │
│   📝 ตัวอย่างการใช้งาน:                                          │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │ ตัวอย่าง 1: "อร่อยมาก!" → บวก                           │   │
│   │ ตัวอย่าง 2: "ผิดหวัง" → ลบ                               │   │
│   │ ตัวอย่าง 3: "ก็โอเค" → กลาง                              │   │
│   │ ─────────────────────────────────                       │   │
│   │ Input: "อาหารดี แต่รอนาน" → ???                          │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                  │
│   ✅ เหมาะสำหรับ: Data Transformation, Classification,          │
│                   Format Standardization                        │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**เมื่อไหร่ควรใช้:**
- ต้องการ output format เฉพาะ
- Task ที่ต้องการความสม่ำเสมอ
- การแปลงข้อมูลตาม pattern

---

### 2. Chain-of-Thought (CoT) ⭐⭐

**ทฤษฎี:** กระตุ้นให้ LLM แสดงขั้นตอนการคิดอย่างเป็นลำดับก่อนให้คำตอบสุดท้าย

```
┌─────────────────────────────────────────────────────────────────┐
│                    CHAIN-OF-THOUGHT (CoT)                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│   ❌ Without CoT                    ✅ With CoT                  │
│   ┌─────────────────┐              ┌─────────────────┐          │
│   │    คำถาม        │              │    คำถาม        │          │
│   │       │         │              │       │         │          │
│   │       ▼         │              │       ▼         │          │
│   │    คำตอบ        │              │   ขั้นตอน 1     │          │
│   │  (อาจผิดพลาด)    │              │       │         │          │
│   │                 │              │       ▼         │          │
│   │                 │              │   ขั้นตอน 2     │          │
│   │                 │              │       │         │          │
│   │                 │              │       ▼         │          │
│   │                 │              │   ขั้นตอน 3     │          │
│   │                 │              │       │         │          │
│   │                 │              │       ▼         │          │
│   │                 │              │    คำตอบ        │          │
│   │                 │              │   (แม่นยำกว่า)   │          │
│   └─────────────────┘              └─────────────────┘          │
│                                                                  │
│   💡 Trigger Phrases:                                            │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  • "Let's think step by step"                           │   │
│   │  • "คิดทีละขั้นตอน"                                       │   │
│   │  • "แสดงวิธีคิด"                                          │   │
│   │  • "อธิบายเหตุผลของคุณ"                                    │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                  │
│   ✅ เหมาะสำหรับ: Math Problems, Logical Reasoning,             │
│                   Complex Analysis, Decision Making             │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**ตัวอย่างผลลัพธ์:**
```
โจทย์: ร้านค้าขายเสื้อ 3 ตัว ราคาตัวละ 250 บาท ลด 10% จ่ายเท่าไหร่?

CoT Response:
ขั้นตอน 1: คำนวณราคาเสื้อทั้งหมด = 3 × 250 = 750 บาท
ขั้นตอน 2: คำนวณส่วนลด = 750 × 10% = 75 บาท
ขั้นตอน 3: ราคาสุทธิ = 750 - 75 = 675 บาท
คำตอบ: 675 บาท
```

---

### 3. Self-Consistency CoT ⭐⭐⭐

**ทฤษฎี:** สร้างคำตอบหลายครั้งด้วยเส้นทางการคิดที่แตกต่างกัน แล้วเลือกคำตอบที่ consistent มากที่สุด

```
┌─────────────────────────────────────────────────────────────────┐
│                   SELF-CONSISTENCY CoT                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│                         ┌─────────┐                             │
│                         │ คำถาม   │                             │
│                         └────┬────┘                             │
│                              │                                   │
│              ┌───────────────┼───────────────┐                  │
│              ▼               ▼               ▼                  │
│       ┌─────────────┐ ┌─────────────┐ ┌─────────────┐          │
│       │  Path 1     │ │  Path 2     │ │  Path 3     │          │
│       │ (T=0.7)     │ │ (T=0.7)     │ │ (T=0.7)     │          │
│       │             │ │             │ │             │          │
│       │ คำตอบ: 42   │ │ คำตอบ: 42   │ │ คำตอบ: 45   │          │
│       └──────┬──────┘ └──────┬──────┘ └──────┬──────┘          │
│              │               │               │                  │
│              └───────────────┼───────────────┘                  │
│                              ▼                                   │
│                    ┌─────────────────┐                          │
│                    │  Majority Vote  │                          │
│                    │  42: 2 votes    │                          │
│                    │  45: 1 vote     │                          │
│                    └────────┬────────┘                          │
│                              │                                   │
│                              ▼                                   │
│                    ┌─────────────────┐                          │
│                    │  Final: 42 ✅   │                          │
│                    │  (Confidence:   │                          │
│                    │   66.7%)        │                          │
│                    └─────────────────┘                          │
│                                                                  │
│   📊 Voting Methods:                                             │
│   • Majority Voting: เลือกคำตอบที่มีมากที่สุด                     │
│   • Weighted Voting: ถ่วงน้ำหนักด้วย confidence                  │
│                                                                  │
│   ✅ เหมาะสำหรับ: Complex Problems, High-stakes Decisions,       │
│                   Problems needing verification                 │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

### 4. Prompt Chaining ⭐⭐⭐

**ทฤษฎี:** แบ่งงานซับซ้อนออกเป็นขั้นตอนย่อย โดย output ของ prompt หนึ่งจะเป็น input ของ prompt ถัดไป

```
┌─────────────────────────────────────────────────────────────────┐
│                      PROMPT CHAINING                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │                    Complex Task                          │   │
│   │               "วิเคราะห์บทความธุรกิจ"                       │   │
│   └─────────────────────────────────────────────────────────┘   │
│                              │                                   │
│                              ▼                                   │
│   ╔═══════════════════════════════════════════════════════════╗ │
│   ║  Chain 1: Extract                                          ║ │
│   ║  ┌─────────────────────────────────────────────────────┐  ║ │
│   ║  │ • สกัดข้อมูลสำคัญ                                     │  ║ │
│   ║  │ • ระบุตัวเลข/สถิติ                                    │  ║ │
│   ║  │ • หาบุคคล/องค์กรที่เกี่ยวข้อง                           │  ║ │
│   ║  └──────────────────────────┬──────────────────────────┘  ║ │
│   ╚═════════════════════════════╪═════════════════════════════╝ │
│                                 │ Output 1                      │
│                                 ▼                                │
│   ╔═══════════════════════════════════════════════════════════╗ │
│   ║  Chain 2: Analyze                                          ║ │
│   ║  ┌─────────────────────────────────────────────────────┐  ║ │
│   ║  │ Input: Output 1                                      │  ║ │
│   ║  │ • วิเคราะห์ Sentiment                                 │  ║ │
│   ║  │ • ระบุ Tone                                          │  ║ │
│   ║  │ • หากลุ่มเป้าหมาย                                      │  ║ │
│   ║  └──────────────────────────┬──────────────────────────┘  ║ │
│   ╚═════════════════════════════╪═════════════════════════════╝ │
│                                 │ Output 2                      │
│                                 ▼                                │
│   ╔═══════════════════════════════════════════════════════════╗ │
│   ║  Chain 3: Synthesize                                       ║ │
│   ║  ┌─────────────────────────────────────────────────────┐  ║ │
│   ║  │ Input: Output 1 + Output 2                           │  ║ │
│   ║  │ • สร้างสรุป                                           │  ║ │
│   ║  │ • ให้ข้อเสนอแนะ                                        │  ║ │
│   ║  │ • เสนอแนวทาง                                          │  ║ │
│   ║  └─────────────────────────────────────────────────────┘  ║ │
│   ╚═══════════════════════════════════════════════════════════╝ │
│                                 │                                │
│                                 ▼                                │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │                    Final Output                          │   │
│   │           บทวิเคราะห์ที่สมบูรณ์และเป็นระบบ                    │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                  │
│   ✅ เหมาะสำหรับ: Multi-step Analysis, Document Processing,      │
│                   Complex Workflows                             │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

### 5. Reflection ⭐⭐⭐⭐

**ทฤษฎี:** ให้ LLM ทบทวนและประเมินคำตอบของตัวเอง แล้วปรับปรุงให้ดีขึ้น

```
┌─────────────────────────────────────────────────────────────────┐
│                        REFLECTION                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  Phase 1: GENERATE                                       │   │
│   │  ┌─────────────────────────────────────────────────┐    │   │
│   │  │          สร้างคำตอบเบื้องต้น                        │    │   │
│   │  │              (Initial Response)                   │    │   │
│   │  └─────────────────────────────────────────────────┘    │   │
│   └─────────────────────────────────────────────────────────┘   │
│                              │                                   │
│                              ▼                                   │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  Phase 2: REFLECT                                        │   │
│   │  ┌─────────────────────────────────────────────────┐    │   │
│   │  │  🔍 วิเคราะห์คำตอบ:                                │    │   │
│   │  │  • จุดแข็ง (Strengths)                            │    │   │
│   │  │  • จุดอ่อน (Weaknesses)                           │    │   │
│   │  │  • สิ่งที่ขาดหาย (Missing)                         │    │   │
│   │  │  • ข้อผิดพลาด (Errors)                            │    │   │
│   │  └─────────────────────────────────────────────────┘    │   │
│   └─────────────────────────────────────────────────────────┘   │
│                              │                                   │
│                              ▼                                   │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  Phase 3: IMPROVE                                        │   │
│   │  ┌─────────────────────────────────────────────────┐    │   │
│   │  │          ✨ สร้างคำตอบที่ปรับปรุงแล้ว                 │    │   │
│   │  │              (Improved Response)                  │    │   │
│   │  │                                                   │    │   │
│   │  │  แก้ไข: จุดอ่อน ✓ สิ่งที่ขาด ✓ ข้อผิดพลาด ✓        │    │   │
│   │  └─────────────────────────────────────────────────┘    │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                  │
│   🔄 Iterative Reflection: สามารถทำซ้ำได้หลายรอบจนพอใจ          │
│                                                                  │
│   ✅ เหมาะสำหรับ: Content Writing, Code Generation,              │
│                   Creative Tasks                                │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

### 6. Tree-of-Thought (ToT) ⭐⭐⭐⭐⭐

**ทฤษฎี:** สำรวจหลายเส้นทางการคิดพร้อมกัน เหมือนการเล่นหมากรุกที่พิจารณาหลายตาล่วงหน้า

```
┌─────────────────────────────────────────────────────────────────┐
│                     TREE-OF-THOUGHT (ToT)                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│                         ┌─────────┐                             │
│                         │ Problem │                             │
│                         └────┬────┘                             │
│                              │                                   │
│            ┌─────────────────┼─────────────────┐                │
│            ▼                 ▼                 ▼                │
│     ┌────────────┐    ┌────────────┐    ┌────────────┐         │
│     │ Approach A │    │ Approach B │    │ Approach C │         │
│     │ Score: 7/10│    │ Score: 8/10│    │ Score: 5/10│         │
│     └─────┬──────┘    └─────┬──────┘    └─────┬──────┘         │
│           │                 │                 │                 │
│           │           ┌─────┴─────┐           │                 │
│           │           ▼           ▼           │                 │
│           │     ┌─────────┐ ┌─────────┐       │                 │
│           │     │ B.1     │ │ B.2     │       │                 │
│           │     │Score:9/10│Score:7/10│       │                 │
│           │     └────┬────┘ └─────────┘       │                 │
│           │          │                        │                 │
│           │          ▼                        │                 │
│           │    ┌──────────┐                   │                 │
│           │    │ B.1 ✅    │                   │                 │
│           │    │ SELECTED │                   │                 │
│           │    │ SOLUTION │                   │                 │
│           │    └──────────┘                   │                 │
│           │                                   │                 │
│      ❌ Pruned                            ❌ Pruned             │
│                                                                  │
│   🌳 Process:                                                    │
│   1. Generate: สร้างหลายทางเลือก                                 │
│   2. Evaluate: ประเมินแต่ละทาง                                   │
│   3. Expand: ขยายทางที่ดี                                        │
│   4. Select: เลือกทางที่ดีที่สุด                                  │
│                                                                  │
│   ✅ เหมาะสำหรับ: Strategic Planning, Complex Problem Solving,   │
│                   Multi-criteria Decisions                      │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

### 7. Self-Feedback ⭐⭐⭐⭐

**ทฤษฎี:** ให้ LLM สร้าง feedback ให้ตัวเองตามเกณฑ์ที่กำหนด แล้วใช้ feedback นั้นปรับปรุงคำตอบ

```
┌─────────────────────────────────────────────────────────────────┐
│                       SELF-FEEDBACK                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │                    CRITERIA                              │   │
│   │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐       │   │
│   │  │Accuracy │ │Clarity  │ │Complete │ │Engaging │       │   │
│   │  │ ness    │ │         │ │ ness    │ │         │       │   │
│   │  └─────────┘ └─────────┘ └─────────┘ └─────────┘       │   │
│   └─────────────────────────────────────────────────────────┘   │
│                              │                                   │
│                              ▼                                   │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  STEP 1: Generate Response                               │   │
│   │  ────────────────────────────────────────────────────   │   │
│   │  "AI กำลังเปลี่ยนแปลงตลาดแรงงานไทย..."                     │   │
│   └─────────────────────────────────────────────────────────┘   │
│                              │                                   │
│                              ▼                                   │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  STEP 2: Self-Feedback                                   │   │
│   │  ────────────────────────────────────────────────────   │   │
│   │  📊 Accuracy:    7/10 - "ข้อมูลถูกต้องแต่ขาดแหล่งอ้างอิง"   │   │
│   │  📊 Clarity:     8/10 - "อ่านเข้าใจง่าย"                   │   │
│   │  📊 Completeness:6/10 - "ขาดตัวอย่างที่เป็นรูปธรรม"        │   │
│   │  📊 Engaging:    7/10 - "ควรเพิ่ม hook ที่ดึงดูด"          │   │
│   └─────────────────────────────────────────────────────────┘   │
│                              │                                   │
│                              ▼                                   │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  STEP 3: Improve based on Feedback                       │   │
│   │  ────────────────────────────────────────────────────   │   │
│   │  ✨ "ในปี 2024 AI ได้สร้างผลกระทบต่อตลาดแรงงานไทย         │   │
│   │     อย่างมีนัยสำคัญ ตามรายงานของ..."                       │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                  │
│   🔑 ความแตกต่างจาก Reflection:                                  │
│   • Reflection: ทบทวนทั่วไป                                     │
│   • Self-Feedback: ใช้เกณฑ์เฉพาะในการประเมิน                    │
│                                                                  │
│   ✅ เหมาะสำหรับ: Content Creation, Quality Assurance,           │
│                   Structured Improvement                        │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

### 8. Self-Critique ⭐⭐⭐⭐⭐

**ทฤษฎี:** LLM วิพากษ์คำตอบของตัวเองอย่างเข้มงวด พยายามหาข้อผิดพลาด จุดอ่อน และสมมติฐานที่ผิดพลาด

```
┌─────────────────────────────────────────────────────────────────┐
│                      SELF-CRITIQUE                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │                   ADVERSARIAL MODE 🎯                    │   │
│   │         "เป็นนักวิจารณ์ที่เข้มงวด - อย่าประนีประนอม!"         │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                  │
│   ┌─────────────┐                                               │
│   │  Response   │                                               │
│   └──────┬──────┘                                               │
│          │                                                       │
│          ▼                                                       │
│   ╔═══════════════════════════════════════════════════════════╗ │
│   ║  🔍 CRITIQUE CHECKLIST                                     ║ │
│   ╠═══════════════════════════════════════════════════════════╣ │
│   ║  □ Logical Fallacies (ข้อผิดพลาดทางตรรกะ)                  ║ │
│   ║  □ Unsupported Assumptions (สมมติฐานไม่มีหลักฐาน)           ║ │
│   ║  □ Incorrect Information (ข้อมูลที่อาจไม่ถูกต้อง)            ║ │
│   ║  □ Weak Arguments (การโต้แย้งที่อ่อน)                       ║ │
│   ║  □ Missing Elements (สิ่งที่ขาดหาย)                         ║ │
│   ║  □ Potential Biases (อคติที่อาจมี)                          ║ │
│   ╚═══════════════════════════════════════════════════════════╝ │
│          │                                                       │
│          ▼                                                       │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  Round 1 Critique:                                       │   │
│   │  ⚠️ "สมมติฐานที่ว่า AI จะแทนที่งานทั้งหมดไม่มีหลักฐาน..."    │   │
│   └──────────────────────────┬──────────────────────────────┘   │
│                              │                                   │
│                              ▼                                   │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  Improved Response (Round 2)                             │   │
│   └──────────────────────────┬──────────────────────────────┘   │
│                              │                                   │
│                              ▼                                   │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  Round 2 Critique:                                       │   │
│   │  ⚠️ "ยังขาดมุมมองจากฝั่งลูกจ้าง..."                        │   │
│   └──────────────────────────┬──────────────────────────────┘   │
│                              │                                   │
│                              ▼                                   │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  ✅ Final Synthesized Response                           │   │
│   │  (รวมจุดแข็ง หลีกเลี่ยงจุดอ่อน สมดุลและรอบคอบ)               │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                  │
│   🔑 ความแตกต่างจาก Self-Feedback:                               │
│   • Self-Feedback: ประเมินตามเกณฑ์ที่กำหนด                      │
│   • Self-Critique: วิพากษ์อย่างเข้มงวด หา "ข้อผิดพลาด"          │
│                                                                  │
│   ✅ เหมาะสำหรับ: Controversial Topics, Important Decisions,     │
│                   Arguments that need to be bulletproof         │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 📊 ระบบ Evaluation

### Overview ของ Evaluation Methods

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      EVALUATION METHODS OVERVIEW                         │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │                    1. LLM-as-a-Judge                             │   │
│   │   ─────────────────────────────────────────────────────────────  │   │
│   │   ใช้ LLM เป็นผู้ตัดสินคุณภาพของ response                         │   │
│   │                                                                   │   │
│   │   📋 Rubric:                                                     │   │
│   │   ┌───────────────┬────────────────────────────────────────┐    │   │
│   │   │ Relevance     │ คำตอบตรงประเด็นกับคำถามมากน้อยเพียงใด    │    │   │
│   │   │ Accuracy      │ ข้อมูลในคำตอบถูกต้องมากน้อยเพียงใด       │    │   │
│   │   │ Completeness  │ คำตอบครบถ้วนสมบูรณ์มากน้อยเพียงใด        │    │   │
│   │   │ Clarity       │ คำตอบชัดเจน เข้าใจง่ายมากน้อยเพียงใด     │    │   │
│   │   │ Helpfulness   │ คำตอบมีประโยชน์ต่อผู้ถามมากน้อยเพียงใด   │    │   │
│   │   └───────────────┴────────────────────────────────────────┘    │   │
│   └─────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │                  2. Pairwise Comparison                          │   │
│   │   ─────────────────────────────────────────────────────────────  │   │
│   │   เปรียบเทียบ 2 คำตอบและเลือกอันที่ดีกว่า                         │   │
│   │                                                                   │   │
│   │   ┌─────────────┐     VS     ┌─────────────┐                    │   │
│   │   │ Response A  │◀──────────▶│ Response B  │                    │   │
│   │   └──────┬──────┘            └──────┬──────┘                    │   │
│   │          │                          │                            │   │
│   │          └──────────┬───────────────┘                            │   │
│   │                     ▼                                            │   │
│   │          ┌─────────────────┐                                     │   │
│   │          │ Winner: A/B/Tie │                                     │   │
│   │          └─────────────────┘                                     │   │
│   └─────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │                3. Reference-free Evaluation                      │   │
│   │   ─────────────────────────────────────────────────────────────  │   │
│   │   ประเมินคุณภาพโดยไม่ต้องมีคำตอบอ้างอิง                           │   │
│   │                                                                   │   │
│   │   📊 Evaluation Aspects:                                         │   │
│   │   • Fluency (ความลื่นไหลของภาษา)                                  │   │
│   │   • Coherence (ความเชื่อมโยงของเนื้อหา)                            │   │
│   │   • Informativeness (ความให้ข้อมูล)                               │   │
│   │   • No Hallucination (ไม่มีการสร้างข้อมูลเท็จ)                      │   │
│   │                                                                   │   │
│   │   🔍 พร้อมตรวจจับ Potential Hallucinations                        │   │
│   └─────────────────────────────────────────────────────────────────┘   │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Comprehensive Evaluation Pipeline

```
┌─────────────────────────────────────────────────────────────────────────┐
│                 COMPREHENSIVE EVALUATION PIPELINE                        │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   ┌────────────┐                                                        │
│   │  Response  │                                                        │
│   │ to Evaluate│                                                        │
│   └─────┬──────┘                                                        │
│         │                                                                │
│         ▼                                                                │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │                                                                  │   │
│   │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐          │   │
│   │  │ LLM-as-Judge │  │Reference-free│  │ Hallucination│          │   │
│   │  │   Score: 8   │  │   Score: 7   │  │  Risk: LOW   │          │   │
│   │  └──────────────┘  └──────────────┘  └──────────────┘          │   │
│   │         │                 │                 │                   │   │
│   │         └─────────────────┼─────────────────┘                   │   │
│   │                           ▼                                     │   │
│   │                  ┌────────────────┐                             │   │
│   │                  │   AGGREGATE    │                             │   │
│   │                  │   SCORING      │                             │   │
│   │                  └───────┬────────┘                             │   │
│   │                          │                                      │   │
│   │                          ▼                                      │   │
│   │   ┌─────────────────────────────────────────────────────────┐  │   │
│   │   │  📊 Final Report                                        │  │   │
│   │   │  ─────────────────────────────────────────────────────  │  │   │
│   │   │  Overall Score: 7.5/10                                  │  │   │
│   │   │  Strengths: Clear, Accurate, Well-structured            │  │   │
│   │   │  Weaknesses: Missing examples                           │  │   │
│   │   │  Hallucination Risk: Low ✅                              │  │   │
│   │   │  Recommendations: Add concrete examples                 │  │   │
│   │   └─────────────────────────────────────────────────────────┘  │   │
│   │                                                                  │   │
│   └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 🚀 การติดตั้งและเริ่มต้นใช้งาน

### Prerequisites

```bash
# ติดตั้ง Library ที่จำเป็น
pip install google-genai pandas numpy
```

### Setup

```python
# Import Libraries
from google import genai
from google.genai import types

# กำหนด API Key และ Model
API_KEY = "YOUR_API_KEY_HERE"
MODEL_NAME = "gemini-2.0-flash"

# สร้าง Client
client = genai.Client(api_key=API_KEY)

# ทดสอบ Connection
response = client.models.generate_content(
    model=MODEL_NAME,
    contents="สวัสดี! ตอบสั้นๆ ว่าคุณพร้อมทำงานแล้ว"
)
print("✅ Connection Test:", response.text)
```

### การขอ API Key

1. ไปที่ [Google AI Studio](https://aistudio.google.com/)
2. สร้าง Project ใหม่
3. ไปที่ Settings > API Keys
4. สร้าง API Key ใหม่

---

## 📝 แบบฝึกหัดและ Challenge

### แบบฝึกหัด 1: Few-shot Prompting
**โจทย์:** สร้าง Few-shot prompt สำหรับแปลงชื่อผลิตภัณฑ์เป็น SKU code
- ตัวอย่าง: "เสื้อยืดสีขาว ไซส์ L" → "TSH-WHT-L"
- สร้างอย่างน้อย 3 ตัวอย่าง

### แบบฝึกหัด 2: Chain-of-Thought
**โจทย์:** ใช้ CoT แก้ปัญหา:
"บริษัทมีพนักงาน 50 คน ต้องการเพิ่มเป็น 75 คนภายใน 6 เดือน 
ถ้าทุก 2 เดือนรับพนักงานใหม่จำนวนเท่าๆ กัน แต่ละรอบต้องรับกี่คน?"

### Final Challenge: Combined Techniques
**โจทย์:** วิเคราะห์ปัญหา EdTech Startup:
- ผู้ใช้ 10,000 คน
- Retention rate 15%
- เป้าหมาย: เพิ่มเป็น 40% ใน 6 เดือน
- งบ 2 ล้านบาท

---

## 📋 สรุป Cheat Sheet

### เทคนิคและเมื่อไหร่ควรใช้

| เทคนิค | ใช้เมื่อ | ความซับซ้อน | API Calls |
|--------|---------|------------|-----------|
| Few-shot | ต้องการ format เฉพาะ | ⭐ | 1 |
| Chain-of-Thought | ปัญหาต้องใช้เหตุผล | ⭐⭐ | 1 |
| Self-Consistency | ต้องการความมั่นใจ | ⭐⭐⭐ | 3-5 |
| Prompt Chaining | งานซับซ้อนหลายขั้นตอน | ⭐⭐⭐ | 2-5 |
| Reflection | ต้องการปรับปรุงคำตอบ | ⭐⭐⭐⭐ | 3 |
| Tree-of-Thought | ปัญหามีหลายทางเลือก | ⭐⭐⭐⭐⭐ | 3-5 |
| Self-Feedback | ต้องการประเมินตามเกณฑ์ | ⭐⭐⭐⭐ | 3 |
| Self-Critique | ต้องการหาจุดอ่อน | ⭐⭐⭐⭐⭐ | 4-6 |

### Decision Flowchart

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    TECHNIQUE SELECTION FLOWCHART                         │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│                         ┌─────────────┐                                 │
│                         │   START     │                                 │
│                         └──────┬──────┘                                 │
│                                │                                         │
│                                ▼                                         │
│                 ┌──────────────────────────────┐                        │
│                 │ ต้องการ format เฉพาะหรือไม่?   │                        │
│                 └───────────────┬──────────────┘                        │
│                        YES │         │ NO                               │
│                            ▼         ▼                                  │
│                   ┌─────────────┐ ┌──────────────────────────────┐     │
│                   │  Few-shot   │ │ ต้องใช้การคิดหลายขั้นตอนหรือไม่? │     │
│                   └─────────────┘ └───────────────┬──────────────┘     │
│                                          YES │         │ NO            │
│                                              ▼         ▼               │
│                                 ┌─────────────┐ ┌─────────────┐        │
│                                 │    CoT      │ │ Direct Prompt│        │
│                                 └──────┬──────┘ └─────────────┘        │
│                                        │                                │
│                                        ▼                                │
│                      ┌──────────────────────────────┐                  │
│                      │ ต้องการความมั่นใจสูงหรือไม่?    │                  │
│                      └───────────────┬──────────────┘                  │
│                             YES │         │ NO                         │
│                                 ▼         │                            │
│                    ┌───────────────────┐  │                            │
│                    │Self-Consistency   │  │                            │
│                    │      CoT          │  │                            │
│                    └───────────────────┘  │                            │
│                                           ▼                            │
│                      ┌──────────────────────────────┐                  │
│                      │ มีหลายทางเลือกต้องพิจารณาหรือไม่?│                  │
│                      └───────────────┬──────────────┘                  │
│                             YES │         │ NO                         │
│                                 ▼         │                            │
│                    ┌───────────────────┐  │                            │
│                    │ Tree-of-Thought   │  │                            │
│                    └───────────────────┘  │                            │
│                                           ▼                            │
│                      ┌──────────────────────────────┐                  │
│                      │ ต้องการปรับปรุงคำตอบหรือไม่?    │                  │
│                      └───────────────┬──────────────┘                  │
│                             YES │         │ NO                         │
│                                 ▼         │                            │
│                  ┌───────────────────────┐│                            │
│                  │ มีเกณฑ์ชัดเจนหรือไม่?   ││                            │
│                  └─────────────┬─────────┘│                            │
│                       YES │    │ NO       │                            │
│                           ▼    ▼          │                            │
│              ┌─────────────┐┌────────────┐│                            │
│              │Self-Feedback││ Reflection ││                            │
│              └─────────────┘└────────────┘│                            │
│                                           ▼                            │
│                      ┌──────────────────────────────┐                  │
│                      │ เป็นหัวข้อถกเถียงได้หรือไม่?    │                  │
│                      └───────────────┬──────────────┘                  │
│                             YES │         │ NO                         │
│                                 ▼         ▼                            │
│                    ┌───────────────────┐ ┌─────────────┐               │
│                    │  Self-Critique    │ │ Basic Prompt│               │
│                    └───────────────────┘ └─────────────┘               │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 📚 แหล่งเรียนรู้เพิ่มเติม

### Documentation
- [Google AI Documentation](https://ai.google.dev/)
- [Gemini API Reference](https://ai.google.dev/api)

### Research Papers
- [Chain-of-Thought Paper](https://arxiv.org/abs/2201.11903) - Wei et al., 2022
- [Tree-of-Thought Paper](https://arxiv.org/abs/2305.10601) - Yao et al., 2023
- [Self-Consistency Paper](https://arxiv.org/abs/2203.11171) - Wang et al., 2022

### Learning Resources
- [Prompt Engineering Guide](https://www.promptingguide.ai/)
- [Learn Prompting](https://learnprompting.org/)

---

## ✅ Learning Outcomes

หลังจากเรียนจบ Lab นี้ นักศึกษาจะสามารถ:

1. ✅ เข้าใจหลักการ Prompt Engineering และเทคนิคขั้นสูงทั้ง 8 แบบ
2. ✅ เลือกใช้เทคนิคที่เหมาะสมกับปัญหาต่างๆ ได้อย่างถูกต้อง
3. ✅ ประยุกต์ใช้ Gemini API ในการสร้าง solutions
4. ✅ ประเมินคุณภาพ Output ด้วย LLM-as-a-Judge และ Reference-free methods
5. ✅ ผสมผสานเทคนิคต่างๆ เพื่อแก้ปัญหาที่ซับซ้อน

---

**🎉 Happy Prompting!**

*Made with ❤️ for AI Engineering Students*